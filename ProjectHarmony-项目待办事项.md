# Project Harmony - 项目待办事项

**最后更新时间：** 2026-02-12 (Issue #94 文档同步更新)

本文档追踪《Project Harmony》接下来的核心开发任务。

---

## 核心任务清单

### P0: 垂直切片开发 (第一章) — ✅ 已完成

*   [x] **任务 1: 根据开发计划实现第一章功能**
    *   **描述:** 严格遵循《第一章"律动尊者·毕达哥拉斯"开发计划》文档，完成所有核心系统改造、6个剧本波次以及Boss战的全部功能实现。
    *   **负责人:** 开发团队
    *   **前置依赖:** `Chapter1_Dev_Plan.md`
    *   **验收标准:** 达到开发计划中定义的"成功标准 (Definition of Done)"。
    *   **完成内容 (2026-02-10):**
        *   ✅ **Milestone 1 (核心系统改造):** 创建 `WaveData.gd` 资源类型；改造 `EnemySpawner.gd` 增加剧本模式（`play_scripted_wave()` / `resume_random_spawning()` / `_process_scripted_wave()`）；改造 `ChapterManager.gd` 增加剧本调度器；改造 `enemy_base.gd` 增加 `initialize_scripted()` 方法；在 `ChapterData.gd` 中为 CH1 配置 `scripted_waves` 调度表。
        *   ✅ **Milestone 2-4 (波次实现):** 创建 6 个剧本波次数据文件（`wave_1_1.gd` ~ `wave_1_6.gd`），分别对应"初识节拍"、"音符差异"、"完美卡拍"、"休止符的力量"、"附点节奏"、"综合运用"。
        *   ✅ **Milestone 5 (Boss 战):** 完整重写 `boss_pythagoras.gd`，实现两阶段设计（简单图形/复杂图形）、八度共振/五度震荡/节拍考验/四度叠加/不和谐脉冲/终焉和弦六种攻击模式、和谐护盾机制、风格排斥（噪音惩罚）系统、克拉尼图形视觉系统。
        *   ✅ **美术资源:** 创建 `ChladniPattern.gdshader`（克拉尼图形Shader）；创建 `RhythmIndicator.gd`（节拍指示器UI）；创建 `TutorialHintManager.gd`（非侵入式教学提示管理器）。

*   [ ] **任务 2: 完善第一章美术资源**
    *   **描述:** 根据开发计划中的美术资源清单，完成所有缺失的美术资源制作与集成，包括但不限于克拉尼图形Shader的精细调优、脉冲网格、节拍指示器UI场景文件、Boss视觉设计等。
    *   **负责人:** 美术团队
    *   **前置依赖:** 任务 1（已完成）。
    *   **验收标准:** 游戏内视觉效果符合设计文档的氛围和风格要求。
    *   **待办细项:**
        *   [ ] 为 `RhythmIndicator.gd` 创建对应的 `.tscn` 场景文件
        *   [ ] 为 `TutorialHintManager.gd` 创建对应的 `.tscn` 场景文件
        *   [ ] 精细调优 `ChladniPattern.gdshader` 的视觉参数
        *   [ ] 为 Boss 毕达哥拉斯设计专属的多层旋转光环精灵/动画
        *   [ ] 集成测试所有视觉效果在 60 FPS 下的性能表现

### P1: 后续章节规划 — ✅ 已完成

*   [x] **任务 3: 规划剩余章节的开发设计**
    *   **描述:** 基于第一章开发计划的"随机流+剧本流"混合模型，为第二章至第七章创建类似的详细开发计划。每个计划需包含章节时间线、核心系统改造需求（如有）、剧本波次设计、Boss战设计和资源清单。
    *   **负责人:** 设计/规划团队
    *   **前置依赖:** 任务 1 完成，第一章开发模式得到验证。
    *   **验收标准:** 为每一个剩余章节都生成一份可执行的 `ChapterX_Dev_Plan.md` 文档。
    *   **完成内容 (2026-02-10):**
        *   ✅ `Chapter2_Dev_Plan.md` — 故障指挥家·艾伦（Screech/Silence 敌人、信号过载/蓝屏死机Boss战）
        *   ✅ `Chapter3_Dev_Plan.md` — 大构建师·巴赫（建筑师音墙/反射棱镜、赋格追逐Boss战）
        *   ✅ `Chapter4_Dev_Plan.md` — 摇滚反叛者·莫扎特（即兴乐手/摇摆弹道、乐句模仿Boss战）
        *   ✅ `Chapter5_Dev_Plan.md` — 印象派织梦师·德彪西（迷雾/倒影、双形态Boss战）
        *   ✅ `Chapter6_Dev_Plan.md` — 十二音序列破坏者·勋伯格（音列矩阵/序列敌人、矩阵变形Boss战）
        *   ✅ `Chapter7_Dev_Plan.md` — 合成主脑·斯托克豪森（频谱相位系统、四乐章最终Boss战）

### P1: 基于评估报告的紧急修复任务

*   [ ] **任务 6: 场景文件补全**
    *   **描述:** 为所有已有脚本但缺少场景文件的敌人创建 `.tscn` 场景文件，使其能在游戏中被实例化。当前有 8 个精英敌人和 10 个章节敌人处于"孤岛"状态。
    *   **负责人:** 开发团队
    *   **前置依赖:** 无（可立即开始）。
    *   **验收标准:** 所有精英敌人和章节敌人均有对应的 `.tscn` 场景文件，且能在编辑器中正常加载。
    *   **待办细项:**
        *   [ ] 为 8 个精英敌人创建 `.tscn` 场景文件
        *   [ ] 为 10 个章节敌人创建 `.tscn` 场景文件
        *   [ ] 验证所有场景文件的脚本引用和节点结构正确

*   [ ] **任务 7: 信号系统审计**
    *   **描述:** 全面审计项目中的信号声明（~206个）与连接/发射调用（~1016处），识别未连接的信号、失效的连接和潜在的运行时错误。
    *   **负责人:** 开发团队
    *   **前置依赖:** 无（可立即开始）。
    *   **验收标准:** 生成信号审计报告，所有关键信号均有对应的连接，无运行时信号错误。
    *   **待办细项:**
        *   [ ] 编写自动化信号审计脚本
        *   [ ] 修复所有未连接或失效的信号
        *   [ ] 验证 `.tscn` 文件中的信号连接有效性

*   [ ] **任务 8: 听感疲劳惩罚机制调优**
    *   **描述:** 在实际游戏体验中测试和调优听感疲劳系统的惩罚强度和触发阈值，确保"单音寂静"和"密度过载"的惩罚力度恰到好处。
    *   **负责人:** 策划/开发团队
    *   **前置依赖:** 任务 6（场景文件补全）完成后，才能进行完整的游戏内测试。
    *   **验收标准:** 惩罚机制在实际游戏中体验合理，不会过于严苛或过于宽松。

*   [ ] **任务 9: 孤岛代码清理**
    *   **描述:** 审计所有脚本文件，识别未被任何场景引用的孤立脚本，决定是补全场景还是移除代码。同时验证所有 `.tscn` 文件中引用的脚本路径有效。
    *   **负责人:** 开发团队
    *   **前置依赖:** 任务 6（场景文件补全）完成后进行。
    *   **验收标准:** 所有脚本文件均有对应的使用场景，无孤立代码。

### P2: 后续开发任务

*   [ ] **任务 4: 第一章集成测试与调优**
    *   **描述:** 在 Godot 编辑器中完整运行第一章，验证"随机→暂停→剧本→恢复随机"的完整流程，调优难度曲线和教学节奏。
    *   **负责人:** 开发团队
    *   **前置依赖:** 任务 1（已完成）、任务 2、任务 6（场景文件补全）。

*   [ ] **任务 5: 第二章功能实现**
    *   **描述:** 根据 `Chapter2_Dev_Plan.md` 实现第二章的全部功能。
    *   **负责人:** 开发团队
    *   **前置依赖:** 任务 4 完成。

---

## 任务依赖关系图

```
任务1 (✅) ──→ 任务2 ──→ 任务4 ──→ 任务5
    │                        ↑
    └──→ 任务3 (✅)         │
                             │
任务6 ──→ 任务8             │
  │       任务9 ────────────┘
  └──→ 任务4
  
任务7 (独立，可并行)
```

---
