# Project Harmony：数值设计文档

**作者：** Manus AI
**版本：** 1.0
**日期：** 2026年2月7日

---

## 1. 引言

本文档旨在为 **Project Harmony** 的核心游戏机制提供一套完整、具体且可量化的数值设计方案。所有数值均基于主游戏设计文档（GDD.md）中定义的法术构建系统与听感疲劳系统，旨在实现机制的落地、平衡游戏体验，并为后续的开发与迭代提供精确的参考基准。

设计遵循以下核心原则：

*   **风险与回报的统一**：高风险的操作（如使用不和谐音、高密度施法）应提供潜在的更高回报，但伴随着显著的惩罚。
*   **多样性策略的奖励**：鼓励玩家探索和组合不同的法术元素（音符、和弦、节奏），并通过数值设计使其成为比单调策略更优的选择。
*   **可读性与直观性**：数值的强度应与其在音乐理论中的直观感受（如和谐/不和谐）相匹配，使玩家能通过听觉直观地理解其行为的后果。

---

## 2. 基础参数与转换

白键音符的基础弹体由四维参数（伤害DMG, 速度SPD, 持续DUR, 大小SIZE）驱动，其总和恒定为12。为了将这些抽象参数转化为游戏内的实际属性，我们定义了以下转换比率：

| 参数 | 每点对应值 | 设计说明 |
| :--- | :--- | :--- |
| **伤害 (DMG)** | 10 基础伤害 | 决定了弹体的基础伤害值。 |
| **速度 (SPD)** | 200 像素/秒 | 决定了弹体的飞行速度，影响射程和命中率。 |
| **持续 (DUR)** | 0.5 秒 | 决定了弹体在消失前的存活时间。 |
| **大小 (SIZE)** | 8 像素 | 决定了弹体的碰撞半径，影响命中率和覆盖范围。 |

### 2.1. 白键音符基础弹体数值分析

基于上述转换比率，我们可以计算出每个白键音符法术的详细游戏内数值。**有效DPS** 是一个综合指标，它估算了在标准施法间隔（假设BPM=120，每拍0.5秒）下，考虑了命中率因素后的期望秒伤。

> **有效DPS** ≈ (基础伤害 × 命中因子) / 施法间隔
> **命中因子** ≈ min(1.0, (SIZE点数 × SPD点数) / 12.0)

| 音符 | DMG | SPD | DUR | SIZE | 实际伤害 | 速度(px/s) | 存活(s) | 半径(px) | 有效DPS | 覆盖面积(px²) |
| :---: | :-: | :-: | :-: | :-: | :---: | :---: | :---: | :---: | :---: | :---: |
| **C** | 3 | 3 | 3 | 3 | 30 | 600 | 1.5 | 24 | 45.0 | 1810 |
| **D** | 2 | 5 | 3 | 2 | 20 | 1000 | 1.5 | 16 | 33.3 | 804 |
| **E** | 2 | 2 | 4 | 4 | 20 | 400 | 2.0 | 32 | 26.7 | 3217 |
| **F** | 2 | 1 | 5 | 4 | 20 | 200 | 2.5 | 32 | 13.3 | 3217 |
| **G** | 5 | 3 | 2 | 2 | 50 | 600 | 1.0 | 16 | 50.0 | 804 |
| **A** | 4 | 2 | 4 | 2 | 40 | 400 | 2.0 | 16 | 26.7 | 804 |
| **B** | 4 | 4 | 2 | 2 | 40 | 800 | 1.0 | 16 | 53.3 | 804 |

**分析**：
*   **G (爆发伤害)** 和 **B (高速高伤)** 拥有最高的单体有效DPS，符合其设计定位。
*   **E (大范围持久)** 和 **F (区域控制)** 的单体DPS较低，但其价值体现在巨大的覆盖面积和存活时间上，适合处理密集或慢速的敌人。
*   **D (极速远程)** 拥有最快的弹速，使其在远距离狙击时具有优势。
*   **C (均衡型)** 的各项数值最为中庸，是可靠的基准选择。

---

## 3. 法术构建系统数值

### 3.1. 黑键修饰符

黑键作为一次性修饰符，为下一个法术附加特殊效果。其数值设计旨在提供约 **1.5x ~ 2.2x** 的理想伤害增益，以换取一次黑键的使用机会和微量的疲劳代价。

| 修饰符 | 效果 | 数值细节 | 理想总伤害倍率 | 疲劳代价 |
| :--- | :--- | :--- | :--- | :---: |
| **C# (穿透)** | 弹体穿透敌人 | 最多穿透 **3** 个目标，每次穿透后伤害衰减为 **75%** | 1 + 0.75 + 0.56 = **2.31x** | 0.03 |
| **D# (追踪)** | 弹体追踪敌人 | 追踪强度 **0.6** (高转向率)，但弹体速度降低为 **80%** | **~1.0x** (伤害不变，命中率提升) | 0.03 |
| **F# (分裂)** | 弹体命中后分裂 | 分裂为 **3** 个子弹体，每个造成 **40%** 伤害 | 1 + 3 × 0.4 = **2.2x** | 0.04 |
| **G# (回响)** | 命中后原地回响 | 延迟 **0.5秒** 后产生 **2** 次回响，每次造成 **60%** 伤害 | 1 + 2 × 0.6 = **2.2x** | 0.03 |
| **A# (散射)** | 变为扇形散射 | 散射 **5** 个弹体，每个造成 **35%** 伤害，分布在 **30°** 夹角内 | **1.75x** (全命中) / **~0.7x** (单目标) | 0.04 |

### 3.2. 和弦法术形态

和弦将基础音符组合成更强大的法术形态。其数值设计的核心是平衡 **威力**、**功能性** 与 **不和谐度**（即风险）。不和谐度越高的和弦，往往拥有更极端或强大的效果，但也会在“单音寂静”系统中产生更高的“不和谐值”，直接对玩家造成惩罚。

| 和弦类型 | 音数 | 不和谐度 | 法术形态 | 伤害倍率 | 效果细节 | 疲劳不和谐 | 风险等级 |
| :--- | :-: | :-: | :--- | :-: | :--- | :---: | :---: |
| **大三和弦** | 3 | 2.00 | 强化弹体 | **1.5x** | 所有四维参数点数+1 | 0.05 | 低 |
| **小三和弦** | 3 | 2.00 | DOT弹体 | **0.6x** | 附加3秒DOT，总伤害为基础伤害的1.8x | 0.05 | 低 |
| **增三和弦** | 3 | 2.00 | 爆炸弹体 | **0.8x** | 命中后爆炸，半径=SIZE×3，爆炸伤害50% | 0.10 | 中 |
| **减三和弦** | 3 | 4.67 | 冲击波 | **1.2x** | 以自身为中心释放冲击波，半径=SIZE×5 | 0.20 | 高 |
| **挂留和弦** | 3 | 1.17 | 蓄力弹体 | **2.0x** | 延迟1拍释放，伤害翻倍 | 0.02 | 极低 |
| **属七和弦** | 4 | 3.50 | 持续区域 | **0.4x** | 持续DUR×2秒，每0.5秒造成40%伤害 | 0.15 | 高 |
| **减七和弦** | 4 | 6.00 | 天降打击 | **3.0x** | 延迟2拍，在指定区域造成毁灭性打击 | 0.30 | 极高 |
| **大七和弦** | 4 | 2.50 | 护盾/治疗 | **0.0x** | 生成护盾(吸收量=根音DMG×20)或治疗(量=根音DMG×15) | 0.08 | 中 |
| **小七和弦** | 4 | 3.00 | 召唤/构造 | **0.5x** | 召唤构造物(持续DUR×3秒, 每秒50%伤害) | 0.12 | 中 |

### 3.3. 和弦进行

和弦进行奖励玩家对乐理的理解和应用，通过特定的功能转换触发强大的乐段效果。效果的强度随“完整度”（构成进行的和弦数量）提升而增加。

| 功能转换 | 含义 | 效果类型 | 效果示例与数值 | 2和弦 | 3和弦 | 4和弦 |
| :--- | :--- | :--- | :--- | :---: | :---: | :---: |
| **D → T** | 紧张到解决 | 爆发正面 | **爆发治疗**: 恢复最大生命值的 **15%**<br>**全屏伤害**: 对所有敌人造成 **50** 点伤害<br>**法术增幅**: 下 **2** 次法术伤害 **+50%** | **x1.0** | **x1.5** | **x2.0** |
| **T → D** | 稳定到紧张 | 蓄力增伤 | **伤害翻倍**: 下一个法术伤害 **x2.0**<br>**暴击增幅**: 下 **3** 次法术暴击率 **+30%**<br>**穿甲**: 下一个法术无视 **50%** 防御 | **x1.0** | **x1.5** | **x2.0** |
| **PD → D** | 准备到紧张 | 加速增幅 | **冷却缩减**: 所有音符疲劳值 **-20%**<br>**节奏加速**: 下一小节施法速度 **+50%**<br>**范围扩大**: 下 **2** 次法术SIZE **+2** | **x1.0** | **x1.5** | **x2.0** |

### 3.4. 节奏型行为模式

节奏型直接改变一个小节内所有弹体的行为模式，为玩家提供了在不改变音符和弦的情况下，调整战术策略的维度。

| 节奏型 | 效果描述 | 数值变化 | 战术应用 |
| :--- | :--- | :--- | :--- |
| **均匀八分音符 [连射]** | 每拍发射2个弹体 | 弹体数量x2, SIZE-1 | 通过增加弹幕密度来应对大量小怪。 |
| **附点节奏 [重击]** | 弹体伤害增加并获得击退 | DMG+1, SPD-1, 附加击退效果 | 牺牲速度换取更高的单体伤害和控制，适合对付精英敌人。 |
| **切分节奏 [闪避射击]** | 发射时玩家向后微小位移 | 玩家后退30像素 | 在攻击的同时进行规避，提高生存能力。 |
| **摇摆节奏 [摇摆弹道]** | 弹体呈S型轨迹飞行 | 弹道振幅=SIZE×2, 波长=SPD×0.5 | 增加弹道的覆盖范围，适合在狭窄或复杂的环境中攻击。 |
| **三连音 [三连发]** | 每拍发射3个扇形弹体 | 弹体数量x3, 伤害x50%, 45°扇形 | 在中距离实现范围覆盖，兼顾了密度和范围。 |
| **休止符 [精准蓄力]** | 消耗空拍强化其他弹体 | 每有一个休止符，小节内其他弹体DMG+0.5, SIZE+0.5 | 通过牺牲施法频率来换取单发的高质量打击，同时有效管理密度值。 |

---

## 4. “单音寂静”三维惩罚系统数值

该系统取代了传统的CD和蓝条，通过三个维度（单调值、密度值、不和谐值）来动态管理玩家行为。这三个值均有独立的累积和衰减规则，并会触发不同的惩罚。

| 维度 | 触发与累积 | 衰减方式 | 惩罚阈值与效果 |
| :--- | :--- | :--- | :--- |
| **单调值** | **触发**: 重复同一音符<br>**累积**: 每次重复 **+15** (满值100) | **自然衰减**: -5/秒<br>**主动衰减**: 使用不同音符 **-20** | **40 (警告)**: 视觉变暗<br>**70 (寂静)**: 该音符伤害 **-50%**<br>**90 (锁定)**: 该音符禁用 **3秒** |
| **密度值** | **触发**: 连续施法无休止<br>**累积**: 每次施法 **+8** (满值100) | **主动衰减**: 每个休止符 **-25**<br>**自然衰减**: -3/秒 | **50 (轻微)**: 精准度 **-10%**<br>**75 (过载)**: 精准度 **-30%**, 施法速度 **-20%**<br>**95 (崩溃)**: 全属性 **-40%** Debuff, 持续2秒 |
| **不和谐值** | **触发**: 使用不和谐和弦<br>**累积**: 按和弦不和谐度累积 | **主动衰减**: 和谐法术 **-15**, D→T解决 **-30**<br>**自然衰减**: -2/秒 | **30 (微痛)**: 每秒扣血 **1**<br>**60 (腐蚀)**: 每秒扣血 **3**, 最大生命临时 **-10%**<br>**85 (危险)**: 每秒扣血 **6**, 最大生命临时 **-25%** |

**核心交互**：
*   **不和谐的双刃剑**：使用不和谐法术会累积“不和谐值”导致扣血，但因为引入了变化，可以降低 **-10** 的“单调值”。
*   **密度放大风险**：当“密度值”过高时，会放大“不和谐值”的扣血效果 **x1.5**。
*   **AFI系统联动**：全局的听感疲劳指数（AFI）等级会放大单音寂静三维值的累积速率（MILD: x1.1, MODERATE: x1.3, SEVERE: x1.6, CRITICAL: x2.0），使玩家在整体单调的情况下更容易触发局部惩罚。

---

## 5. 玩家与敌人基础数值参考

为了让上述法术伤害数值有一个明确的参照系，此处提供游戏初期的玩家与敌人基础数值设定，所有平衡应围绕这些基准展开。

| 实体 | 属性 | 数值 | 说明 |
| :--- | :--- | :--- | :--- |
| **玩家** | 基础生命值 | 200 | 玩家的初始血量。 |
| | 生命恢复 | 1 / 秒 | 基础的自然恢复速率。 |
| | 移动速度 | 250 px/s | 玩家的基础移动速度。 |
| **普通敌人** | 生命值 | 50 - 100 | 需要玩家2-3次基础攻击才能击杀。 |
| | 伤害 | 5 - 15 | 对玩家的威胁较低。 |
| **精英敌人** | 生命值 | 300 - 500 | 需要玩家策略性地组合和弦或利用节奏才能高效击杀。 |
| | 伤害 | 20 - 40 | 对玩家构成显著威胁。 |
| **Boss** | 生命值 | 1000 - 3000 | 需要玩家熟练运用所有系统，进行持续且高效的输出来击败。 |
| | 伤害 | 30 - 60 | Boss的攻击是致命的，需要有效规避。 |

---

## 6. 总结与平衡性分析

本数值设计旨在构建一个动态、自洽且富有深度的战斗系统。通过DPS分析可见，没有任何一种单一策略是绝对最优的：

*   **单音符 spam**（如纯G音符）虽然理论DPS最高（100），但会极快地触发“单调值”惩罚，导致输出锐减并被锁定，是一种不可持续的策略。
*   **多样化轮换** 基础音符，虽然单次伤害不突出，但能将DPS稳定在 **70** 左右，且疲劳风险极低，是安全稳健的输出方式。
*   **使用和谐和弦**（如大三和弦）能显著提升DPS至 **90**，且疲劳风险低，是玩家应该追求的核心输出手段。
*   **使用高风险和弦**（如减七和弦）虽然拥有 **3.0x** 的爆发潜力，但其高昂的不和谐度惩罚和施法延迟使其成为一种需要精确计算时机和后续恢复手段的战术选择。

最终，这套数值体系鼓励玩家从“按最强的键”转向“按最合适的键”，在战斗中思考音乐的和谐、结构与变化，从而实现 **“战斗即创作”** 的核心设计理念。
