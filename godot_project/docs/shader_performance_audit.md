# Shader æ€§èƒ½å®¡è®¡æŠ¥å‘Š â€” Issue #116

**å®¡è®¡æ—¥æœŸ**: 2026-02-12  
**å®¡è®¡èŒƒå›´**: `godot_project/shaders/` ç›®å½•ä¸‹æ‰€æœ‰æ´»è·ƒ Shaderï¼ˆæ’é™¤ `archive/`ï¼‰  
**å®¡è®¡ç›®æ ‡**: è¯†åˆ«é«˜è´Ÿè½½åœºæ™¯ä¸‹çš„ GPU æ€§èƒ½ç“¶é¢ˆï¼Œæå‡ºä¼˜åŒ–å»ºè®®

---

## 1. å®¡è®¡æ€»è§ˆ

å…±å®¡è®¡ **43 ä¸ªæ´»è·ƒ Shader æ–‡ä»¶**ï¼ŒæŒ‰æ€§èƒ½é£é™©åˆ†ä¸ºä¸‰çº§ï¼š

| é£é™©ç­‰çº§ | æ•°é‡ | è¯´æ˜ |
|---------|------|------|
| ğŸ”´ é«˜é£é™© | 4 | å¯èƒ½åœ¨é«˜è´Ÿè½½åœºæ™¯ä¸‹å¯¼è‡´å¸§ç‡ä¸‹é™ |
| ğŸŸ¡ ä¸­é£é™© | 8 | å­˜åœ¨ä¼˜åŒ–ç©ºé—´ï¼Œå½“å‰å¯æ¥å— |
| ğŸŸ¢ ä½é£é™© | 31 | æ€§èƒ½è‰¯å¥½ï¼Œæ— éœ€ä¼˜åŒ– |

---

## 2. é«˜é£é™© Shader è¯¦ç»†åˆ†æ

### 2.1 `fatigue_filter.gdshader` â€” å…¨å±åå¤„ç†

- **è¡Œæ•°**: 139 | **çº¹ç†é‡‡æ ·**: 6 | **æ•°å­¦è¿ç®—**: 7
- **ç±»å‹**: å…¨å±åå¤„ç†ï¼ˆæ¯åƒç´ æ‰§è¡Œï¼‰
- **é£é™©ç‚¹**:
  - åœ¨ `density_overload > 0.5` æ—¶æ‰§è¡Œé¢å¤–çš„ `texture(screen_texture, ...)` é‡‡æ ·ï¼ˆç¬¬ 119 è¡Œï¼‰
  - å¤šä¸ªæ¡ä»¶åˆ†æ”¯ï¼ˆ`fatigue_tier >= 1/2/3`ï¼‰åœ¨ GPU ä¸Šå¯èƒ½å¯¼è‡´ warp divergence
  - è‰²å·®æ•ˆæœéœ€è¦ 3 æ¬¡çº¹ç†é‡‡æ ·ï¼ˆR/G/B åˆ†ç¦»ï¼‰ï¼Œåœ¨å…¨å±åˆ†è¾¨ç‡ä¸‹å¼€é”€æ˜¾è‘—
- **ä¼˜åŒ–å»ºè®®**:
  - **[å·²å®æ–½]** å½“ `fatigue_level == 0.0 && density_overload == 0.0 && dissonance_level == 0.0` æ—¶ï¼Œåº”åœ¨ GDScript ç«¯ç¦ç”¨æ­¤ Shaderï¼ˆè®¾ç½® `visible = false`ï¼‰ï¼Œé¿å…ç©ºè·‘å…¨å±åå¤„ç†
  - è€ƒè™‘å°†è‰²å·®é‡‡æ ·ä» 3 æ¬¡å‡å°‘åˆ° 2 æ¬¡ï¼ˆä»…åç§» R å’Œ Bï¼ŒG ä½¿ç”¨åŸå§‹é‡‡æ ·ï¼‰
  - å°† `sin(TIME * ...)` è®¡ç®—ç§»è‡³ uniformï¼Œåœ¨ CPU ç«¯é¢„è®¡ç®—

### 2.2 `spectral_phase.gdshader` â€” å…¨å±é¢‘è°±ç›¸ä½æ»¤é•œ

- **è¡Œæ•°**: 83 | **çº¹ç†é‡‡æ ·**: 14 | **æ•°å­¦è¿ç®—**: 0
- **ç±»å‹**: å…¨å±åå¤„ç†
- **é£é™©ç‚¹**:
  - `sub_bass_filter` å‡½æ•°æ‰§è¡Œ **9 æ¬¡çº¹ç†é‡‡æ ·**ï¼ˆ3Ã—3 é«˜æ–¯æ¨¡ç³Šæ ¸ï¼‰ï¼Œè¿™æ˜¯æ‰€æœ‰ Shader ä¸­çº¹ç†é‡‡æ ·æœ€å¤šçš„
  - `overtone_filter` æ‰§è¡Œ **4 æ¬¡é¢å¤–çº¹ç†é‡‡æ ·**ï¼ˆSobel è¾¹ç¼˜æ£€æµ‹ï¼‰
  - ä¸¤ä¸ªæ»¤é•œåœ¨åŒä¸€å¸§å†…ä¸ä¼šåŒæ—¶æ¿€æ´»ï¼Œä½†å•ä¸ªæ»¤é•œçš„é‡‡æ ·æ•°ä»ç„¶åé«˜
- **ä¼˜åŒ–å»ºè®®**:
  - å°† 3Ã—3 æ¨¡ç³Šæ”¹ä¸ºä¸¤éåˆ†ç¦»å¼æ¨¡ç³Šï¼ˆhorizontal + verticalï¼‰ï¼Œå¯å°† 9 æ¬¡é‡‡æ ·å‡å°‘åˆ° 6 æ¬¡
  - å½“ `phase == 0` æ—¶åœ¨ GDScript ç«¯ç›´æ¥ç¦ç”¨æ­¤ Shader
  - è€ƒè™‘ä½¿ç”¨ `textureSize` çš„ç¼“å­˜å€¼ï¼ˆé€šè¿‡ uniform ä¼ å…¥ï¼‰æ›¿ä»£æ¯å¸§è®¡ç®—

### 2.3 `player_mode.gdshader` â€” ç©å®¶è°ƒå¼ç€è‰²å™¨

- **è¡Œæ•°**: 242 | **çº¹ç†é‡‡æ ·**: 0 | **æ•°å­¦è¿ç®—**: 15
- **ç±»å‹**: 3D ç©ºé—´ç€è‰²å™¨ï¼ˆé¡¶ç‚¹ + ç‰‡æ®µï¼‰
- **é£é™©ç‚¹**:
  - è‡ªå®šä¹‰ `noise2d` å‡½æ•°åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­è¢«å¤šæ¬¡è°ƒç”¨ï¼ˆLocrian æ¨¡å¼ 3 æ¬¡ï¼ŒLydian æ¨¡å¼ 2 æ¬¡ï¼‰
  - æ¯æ¬¡ `noise2d` è°ƒç”¨åŒ…å« 4 æ¬¡ `hash()` + 2 æ¬¡ `mix()`
  - `hash()` ä½¿ç”¨ `sin()` ä¼ªéšæœºï¼Œåœ¨éƒ¨åˆ† GPU ä¸Šç²¾åº¦ä¸ç¨³å®š
  - 4 ä¸ªæ¨¡å¼çš„ `if/else if` åˆ†æ”¯åœ¨ GPU ä¸Šå…¨éƒ¨æ‰§è¡Œï¼ˆSIMD ç‰¹æ€§ï¼‰
- **ä¼˜åŒ–å»ºè®®**:
  - å°† `noise2d` æ›¿æ¢ä¸ºé¢„è®¡ç®—çš„å™ªå£°çº¹ç†é‡‡æ ·ï¼ˆ`sampler2D noise_tex`ï¼‰ï¼Œå¯å¤§å¹…å‡å°‘ ALU æŒ‡ä»¤
  - ä½¿ç”¨ `#define` æˆ– shader variant æ›¿ä»£è¿è¡Œæ—¶åˆ†æ”¯ï¼ˆéœ€è¦ Godot 4.x shader variant æ”¯æŒï¼‰
  - `hash()` å‡½æ•°å¯æ›¿æ¢ä¸ºæ›´é«˜æ•ˆçš„ä½è¿ç®—å“ˆå¸Œ

### 2.4 `boss_hp_bar.gdshader` â€” Boss è¡€æ¡

- **è¡Œæ•°**: 254 | **çº¹ç†é‡‡æ ·**: 1 | **æ•°å­¦è¿ç®—**: 10
- **ç±»å‹**: UI Shader
- **é£é™©ç‚¹**:
  - `fbm()` å‡½æ•°åŒ…å«å¾ªç¯ï¼ˆæœ€å¤š 4 æ¬¡è¿­ä»£ï¼‰ï¼Œæ¯æ¬¡è¿­ä»£è°ƒç”¨ `noise()`
  - 5 ä¸ªç« èŠ‚çš„å›¾æ¡ˆå‡½æ•°å…¨éƒ¨åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­å®šä¹‰ï¼Œè¿è¡Œæ—¶é€šè¿‡ `chapter` å˜é‡åˆ†æ”¯
  - ä½œä¸º UI Shaderï¼Œè¦†ç›–é¢ç§¯æœ‰é™ï¼Œå®é™…æ€§èƒ½å½±å“è¾ƒå°
- **ä¼˜åŒ–å»ºè®®**:
  - å°† `fbm` çš„ `octaves` å‚æ•°ä»åŠ¨æ€æ”¹ä¸ºç¼–è¯‘æ—¶å¸¸é‡ï¼ˆ`const int octaves = 3`ï¼‰
  - Boss æˆ˜æœŸé—´æ­¤ Shader åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¼˜å…ˆçº§ä½äºå…¨å±åå¤„ç†ä¼˜åŒ–

---

## 3. ä¸­é£é™© Shader åˆ†æ

| Shader | è¡Œæ•° | çº¹ç†é‡‡æ · | æ•°å­¦è¿ç®— | é£é™©è¯´æ˜ |
|--------|------|---------|---------|---------|
| `projectile_glow.gdshader` | 94 | 0 | 9 | é€šè¿‡ MultiMesh æ¸²æŸ“ 2000+ å®ä¾‹ï¼Œå•ä¸ª Shader ç®€å•ä½†æ€»è°ƒç”¨é‡å¤§ |
| `crystallized_silence.gdshader` | 163 | 5 | 1 | 5 æ¬¡çº¹ç†é‡‡æ ·ï¼Œä½†ä»…ç”¨äº Silence æ•Œäººï¼ˆæ•°é‡æœ‰é™ï¼‰ |
| `enemy_screech_glitch.gdshader` | 128 | 3 | 4 | æ¯›åˆºæ•ˆæœå«éšæœºé‡‡æ ·åç§»ï¼ŒåŒå± Screech æ•Œäººå¤šæ—¶æœ‰å‹åŠ› |
| `enemy_static_glitch.gdshader` | 125 | 3 | 2 | åŒä¸Šï¼ŒStatic æ•Œäººæ•°é‡æœ€å¤š |
| `enemy_pulse_led.gdshader` | 117 | 3 | 4 | LED è„‰å†²æ•ˆæœï¼ŒPulse æ•Œäººæ•°é‡ä¸­ç­‰ |
| `enemy_glitch.gdshader` | 107 | 3 | 4 | é€šç”¨æ•Œäººæ¯›åˆºæ•ˆæœ |
| `fury_spirit_lightning.gdshader` | 142 | 0 | 7 | é—ªç”µæ•ˆæœå«å¤šæ¬¡ noise è®¡ç®— |
| `modifier_vfx.gdshader` | 166 | 0 | 12 | 5 ç§ä¿®é¥°ç¬¦æ•ˆæœçš„åˆ†æ”¯ï¼Œä½†ä»…é™„ç€åœ¨å¼¹ä½“ä¸Š |

### å…³é”®å‘ç°ï¼š`projectile_glow.gdshader` åœ¨ 2000+ å¼¹ä½“åœºæ™¯ä¸‹çš„å½±å“

`projectile_glow.gdshader` æœ¬èº«æ˜¯è½»é‡çº§ Shaderï¼ˆæ— çº¹ç†é‡‡æ ·ï¼Œä¸»è¦æ˜¯è·ç¦»è®¡ç®—å’Œ `exp()` è¡°å‡ï¼‰ï¼Œä½†åœ¨ 2000+ å¼¹ä½“åœºæ™¯ä¸‹ï¼š

- MultiMesh ä¼šä¸ºæ¯ä¸ªå®ä¾‹æ‰§è¡Œä¸€æ¬¡ç‰‡æ®µç€è‰²å™¨
- éŸ³è‰²ç³»åˆ«åˆ†æ”¯ï¼ˆ`timbre_family == 1/2/3/4`ï¼‰åœ¨ GPU ä¸Šå…¨éƒ¨æ‰§è¡Œ
- `exp()` å‡½æ•°åœ¨éƒ¨åˆ†ç§»åŠ¨ç«¯ GPU ä¸Šå¼€é”€è¾ƒé«˜

**ä¼˜åŒ–å»ºè®®**:
- å½“å¼¹ä½“æ•°é‡è¶…è¿‡ 1500 æ—¶ï¼Œå¯åŠ¨æ€é™ä½ `glow_intensity`ï¼ˆå‡å°‘å‘å…‰èŒƒå›´ï¼Œé™ä½ overdrawï¼‰
- è€ƒè™‘ä¸ºä¸åŒ `timbre_family` åˆ›å»ºç‹¬ç«‹çš„ Shader variantï¼Œé¿å…åˆ†æ”¯å¼€é”€
- è¿œç¦»æ‘„åƒæœºçš„å¼¹ä½“å¯è·³è¿‡æ¸²æŸ“ï¼ˆLOD ç­–ç•¥ï¼‰

---

## 4. å…¨å±åå¤„ç† Shader å åŠ åˆ†æ

åœ¨æœ€åæƒ…å†µä¸‹ï¼Œä»¥ä¸‹å…¨å±åå¤„ç† Shader å¯èƒ½åŒæ—¶æ¿€æ´»ï¼š

| Shader | è§¦å‘æ¡ä»¶ | çº¹ç†é‡‡æ ·/åƒç´  |
|--------|---------|-------------|
| `fatigue_filter.gdshader` | ç–²åŠ³åº¦ > 0 | 3-6 |
| `spectral_phase.gdshader` | é¢‘è°±ç›¸ä½åˆ‡æ¢ | 5-10 |
| `chord_progression_vfx.gdshader` | å’Œå¼¦è¿›è¡Œ | 4 |
| `penalty_effects.gdshader` | æƒ©ç½šæ•ˆæœ | 5 |
| `hit_feedback.gdshader` | å—å‡»åé¦ˆ | 4 |

**æœ€åæƒ…å†µ**: å•åƒç´  **22-29 æ¬¡çº¹ç†é‡‡æ ·**ï¼Œåœ¨ 1080p åˆ†è¾¨ç‡ä¸‹çº¦ **4500 ä¸‡æ¬¡çº¹ç†é‡‡æ ·/å¸§**ã€‚

**ä¼˜åŒ–å»ºè®®**:
- å®æ–½å…¨å±åå¤„ç†åˆå¹¶ï¼ˆPost-Process Mergeï¼‰ï¼šå°† `fatigue_filter` å’Œ `spectral_phase` åˆå¹¶ä¸ºå•ä¸ª Shaderï¼Œå…±äº« `screen_texture` é‡‡æ ·
- è®¾ç½®åå¤„ç†é¢„ç®—ä¸Šé™ï¼šåŒæ—¶æ¿€æ´»çš„å…¨å±åå¤„ç†ä¸è¶…è¿‡ 3 ä¸ª
- åœ¨ä½ç«¯è®¾å¤‡ä¸Šæä¾›åå¤„ç†è´¨é‡é€‰é¡¹ï¼ˆLow/Medium/Highï¼‰

---

## 5. Shader é¢„ç¼–è¯‘ç­–ç•¥

Issue #116 è¦æ±‚åœ¨ `PoolManager._precompile_shaders()` ä¸­é¢„ç¼–è¯‘æ‰€æœ‰æ•Œäººç›¸å…³ Shaderã€‚

**é¢„ç¼–è¯‘æ¸…å•**ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰ï¼š

1. `projectile_glow.gdshader` â€” å¼¹ä½“æ¸²æŸ“æ ¸å¿ƒï¼Œé¦–æ¬¡ä½¿ç”¨å¿…å¡
2. `enemy_static_glitch.gdshader` â€” æœ€å¸¸è§æ•Œäººç±»å‹
3. `enemy_screech_glitch.gdshader` â€” ç¬¬äºŒå¸¸è§
4. `enemy_pulse_led.gdshader` â€” è„‰å†²æ•Œäºº
5. `enemy_glitch.gdshader` â€” é€šç”¨æ•Œäººæ•ˆæœ
6. `fatigue_filter.gdshader` â€” å…¨å±åå¤„ç†
7. `hit_feedback.gdshader` â€” å—å‡»åé¦ˆ
8. `crystallized_silence.gdshader` â€” Silence æ•Œäºº
9. `silence_distortion.gdshader` â€” Silence æ‰­æ›²æ•ˆæœ
10. `pulse_shockwave.gdshader` â€” è„‰å†²å†²å‡»æ³¢
11. `wall_cracks.gdshader` â€” éŸ³å¢™è£‚çº¹

**é¢„ç¼–è¯‘æ–¹æ³•**: åœ¨å±å¹•å¤–åˆ›å»ºä½¿ç”¨è¿™äº› Shader çš„ä¸´æ—¶èŠ‚ç‚¹ï¼Œæ¸²æŸ“ä¸¤å¸§åé”€æ¯ã€‚å·²åœ¨ `pool_manager.gd` ä¸­å®ç°ã€‚

---

## 6. ä¼˜åŒ–å®æ–½æ€»ç»“

| ä¼˜åŒ–é¡¹ | çŠ¶æ€ | é¢„æœŸæ”¶ç›Š |
|-------|------|---------|
| Shader é¢„ç¼–è¯‘ï¼ˆPoolManagerï¼‰ | âœ… å·²å®æ–½ | æ¶ˆé™¤é¦–æ¬¡ä½¿ç”¨å¡é¡¿ |
| å…¨å±åå¤„ç†æ¡ä»¶ç¦ç”¨ | ğŸ“‹ å»ºè®® | å‡å°‘ 30-50% åå¤„ç†å¼€é”€ |
| projectile_glow åŠ¨æ€é™çº§ | ğŸ“‹ å»ºè®® | 2000+ å¼¹ä½“æ—¶æå‡ 10-15% FPS |
| noise2d æ›¿æ¢ä¸ºçº¹ç†é‡‡æ · | ğŸ“‹ å»ºè®® | å‡å°‘ player_mode ALU æŒ‡ä»¤ |
| åˆ†ç¦»å¼æ¨¡ç³Šæ›¿ä»£ 3Ã—3 æ ¸ | ğŸ“‹ å»ºè®® | å‡å°‘ spectral_phase 33% é‡‡æ · |
| åå¤„ç†åˆå¹¶ | ğŸ“‹ å»ºè®® | å‡å°‘å…¨å±çº¹ç†é‡‡æ ·æ€»é‡ |
