[gd_scene load_steps=5 format=3 uid="uid://silence_enemy_001"]

[ext_resource type="Script" path="res://scripts/entities/enemies/enemy_silence.gd" id="1_silence"]
[ext_resource type="Shader" path="res://shaders/enemy_glitch.gdshader" id="2_glitch"]
[ext_resource type="Shader" path="res://shaders/silence_aura.gdshader" id="3_aura"]

[sub_resource type="CircleShape2D" id="CircleShape2D_body"]
radius = 18.0

[sub_resource type="CircleShape2D" id="CircleShape2D_damage"]
radius = 22.0

[sub_resource type="CircleShape2D" id="CircleShape2D_aura"]
radius = 120.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_glitch"]
shader = ExtResource("2_glitch")
shader_parameter/glitch_intensity = 0.02
shader_parameter/hp_ratio = 1.0
shader_parameter/beat_energy = 0.0
shader_parameter/is_stunned = 0.0
shader_parameter/base_tint = Color(0.15, 0.05, 0.25, 0.85)
shader_parameter/scanline_density = 40.0
shader_parameter/scanline_strength = 0.15
shader_parameter/chromatic_offset = 1.0
shader_parameter/noise_speed = 1.5
shader_parameter/pixel_size = 1.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_aura"]
shader = ExtResource("3_aura")
shader_parameter/aura_radius = 0.8
shader_parameter/absorption_intensity = 0.5
shader_parameter/pulse_speed = 2.0
shader_parameter/player_proximity = 0.0
shader_parameter/aura_color = Color(0.1, 0, 0.2, 0.6)
shader_parameter/rotation_speed = 0.5

[node name="EnemySilence" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 5
script = ExtResource("1_silence")
max_hp = 120.0
move_speed = 35.0
contact_damage = 15.0
xp_value = 12
quantized_fps = 6.0
collision_radius = 18.0
knockback_resistance = 0.7
base_color = Color(0.15, 0.05, 0.25, 0.85)
silence_aura_radius = 120.0
fatigue_per_second = 0.08
spell_damage_reduction = 0.4

[node name="AuraVisual" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_aura")
z_index = -1
scale = Vector2(3, 3)

[node name="EnemyVisual" type="Polygon2D" parent="."]
material = SubResource("ShaderMaterial_glitch")
color = Color(0.15, 0.05, 0.25, 0.85)
polygon = PackedVector2Array(0, -18, 12, -12, 18, 0, 12, 12, 0, 18, -12, 12, -18, 0, -12, -12)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_body")

[node name="DamageArea" type="Area2D" parent="."]
collision_layer = 2
collision_mask = 1

[node name="DamageShape" type="CollisionShape2D" parent="DamageArea"]
shape = SubResource("CircleShape2D_damage")

[node name="SilenceAura" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 1

[node name="AuraShape" type="CollisionShape2D" parent="SilenceAura"]
shape = SubResource("CircleShape2D_aura")
