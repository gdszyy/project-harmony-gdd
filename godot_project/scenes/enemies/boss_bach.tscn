[gd_scene load_steps=4 format=3 uid://boss_bach_001]

[ext_resource type="Script" path="res://scripts/entities/enemies/bosses/boss_bach.gd" id="1_boss_script"]
[ext_resource type="Shader" path="res://shaders/enemy_glitch.gdshader" id="2_glitch"]

[sub_resource type="CircleShape2D" id="CircleShape2D_body"]
radius = 44.0

[sub_resource type="CircleShape2D" id="CircleShape2D_damage"]
radius = 52.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_glitch"]
shader = ExtResource("2_glitch")
shader_parameter/glitch_intensity = 0.15
shader_parameter/hp_ratio = 1.0
shader_parameter/beat_energy = 0.0
shader_parameter/is_stunned = 0.0
shader_parameter/base_tint = Color(0.3, 0.5, 0.9, 1)
shader_parameter/scanline_density = 60.0
shader_parameter/scanline_strength = 0.3
shader_parameter/chromatic_offset = 2.0
shader_parameter/noise_speed = 3.0
shader_parameter/pixel_size = 1.0

[node name="BossBach" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 5
script = ExtResource("1_boss_script")
max_hp = 3000.0
move_speed = 30.0
contact_damage = 22.0
xp_value = 140
collision_radius = 44.0
base_color = Color(0.3, 0.5, 0.9, 1)
boss_name = "巴赫"
boss_title = "大构建师 · The Grand Architect"
show_boss_bar = true
enrage_time = 220.0
resonance_fragment_drop = 70

[node name="EnemyVisual" type="Polygon2D" parent="."]
material = SubResource("ShaderMaterial_glitch")
color = Color(0.3, 0.5, 0.9, 1)
polygon = PackedVector2Array(-40, -20, -30, -44, -10, -44, -10, -20, 10, -20, 10, -44, 30, -44, 40, -20, 40, 30, 20, 44, -20, 44, -40, 30)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_body")

[node name="DamageArea" type="Area2D" parent="."]
collision_layer = 2
collision_mask = 1

[node name="DamageShape" type="CollisionShape2D" parent="DamageArea"]
shape = SubResource("CircleShape2D_damage")
