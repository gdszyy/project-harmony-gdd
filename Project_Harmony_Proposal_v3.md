# 《Project Harmony》游戏设计深化方案

**作者：** Manus AI
**版本：** v3.0
**日期：** 2026年2月7日

---

## 修订说明

本 v3.0 方案在前序版本的基础上，专注于将游戏的核心——法术与和弦系统——进行全面、具体且数据驱动的设计。我们引入了一套量化的**不和谐度计算模型**，并基于此模型详细设计了7个白键法术、5个黑键修饰符，以及一个由至少三个音符构成的动态和弦系统。本方案旨在为这些核心玩法元素提供一套可以直接用于原型开发和数值平衡的详细蓝图。

---

## 1. 不和谐度计算模型 (Dissonance Model)

为了将“听感即平衡”这一设计支柱落到实处，我们建立了一套量化的不和谐度计算模型。该模型是后续所有法术和和弦设计的数学基础。

### 1.1. 基础音程不和谐度

我们首先为十二平均律中的每个基本音程（两个音符之间的关系）赋予一个“不和谐度”评分。该评分基于音乐理论中的音程协和度排序 [1] 和亥姆霍兹（Helmholtz）等人的声学研究理论 [2]，将复杂的频率比关系简化为0（完全协和）到10（极度不协和）的直观数值。

![音程不和谐度评分表](interval_dissonance_chart.png)

*图1：基础音程的不和谐度评分。小二度（如C-C#）和三全音（如C-F#）在听感上最为刺耳，因此评分最高。*

### 1.2. 和弦不和谐度计算

根据您的要求，一个和弦由至少三个音符构成。其不和谐度的计算遵循恩斯特·克热内克（Ernst Krenek）的方法：将和弦拆解为所有可能的音程对，然后计算这些音程不和谐度的**平均值**。这为我们提供了一个评估任意和弦“听感成本”的统一标准。

> **计算公式：**
> `ChordDissonance = Average(Dissonance(p.note1, p.note2) for p in all_pairs_in_chord)`

![常见和弦不和谐度对比](chord_dissonance_chart.png)

*图2：常见和弦的不和谐度计算示例。可以看到，传统的大三和弦、小三和弦具有最低的不和谐度，而包含了三全音的减三和弦、属七和弦则不和谐度显著升高。*

### 1.3. 序列不和谐度（上下文听感）

单个音符或和弦的听感也受其上下文影响。我们引入了“序列不和谐度”的概念，通过一个**距离加权算法**来计算当前音符与其前序音符序列的综合不和谐感。

> **计算公式：**
> `SequenceDissonance = WeightedAverage(Dissonance(current_note, previous_note) for previous_note in window)`
> **权重函数：** `w(d) = 1 / (d + 1)`，其中 `d` 是与当前音符相隔的节拍数。

![距离加权函数](distance_weight_chart.png)

*图3：距离加权函数。距离当前节拍越近的音符，对当前“听感”的影响权重越大。*

![序列不和谐度示例](sequence_dissonance_chart.png)

*图4：一个从和谐到不和谐再回归的法术序列 (C-E-G-C-F#-D#-B-C) 的上下文不和谐度变化曲线。可以看到，在第5拍施放F#（三全音）时，上下文不和谐度急剧飙升，触发了游戏内的“不和谐扣血线”。*

---

## 2. 白键与黑键法术系统

### 2.1. 白键法术 (Tonal Spells) - 7个基础法术

这是玩家法术库的基石，对应C大调的7个自然音。它们的设计旨在提供多样化的基础战斗能力。

| 音符 (Note) | 法术名称 | 效果描述 | 设计思路 |
| :--- | :--- | :--- | :--- |
| **C (Do)** | **基准音波 (Tonic Wave)** | 向前方发射一枚中等大小、稳定飞行的圆形音波。 | 作为调性的根基，提供最稳定、最可靠的输出。 |
| **D (Re)** | **穿刺光束 (Piercing Ray)** | 发射一道可以穿透多个敌人的细长光束。 | “Re”有前进感，适合穿透攻击。 |
| **E (Mi)** | **三连音符 (Triplet Notes)** | 向前方扇形区域发射三枚小音符。 | 作为三和弦的核心，天然与“三”相关。 |
| **F (Fa)** | **悬停音盾 (Sustained Shield)** | 在玩家身边创造一个持续旋转的音盾，可以抵消敌方弹幕。 | “Fa”有下沉和稳定的倾向，适合做防御。 |
| **G (Sol)** | **强力和音 (Power Fifth)** | 蓄力后发射一枚巨大、缓慢但高伤害的重音炮。 | “Sol”是属音，具有力量感和支配力。 |
| **A (La)** | **悲伤回响 (Sorrowful Echo)** | 击中敌人后，会产生一个小的延迟爆炸，对周围造成二次伤害。 | “La”是关系小调的主音，带有忧郁、回味的色彩。 |
| **B (Si)** | **引导之声 (Leading Tone)** | 发射一枚会追踪最近敌人的音符，距离敌人越近，伤害越高。 | “Si”是导音，有强烈的向主音“C”的倾向性，体现为追踪和接近。 |

### 2.2. 黑键修饰符 (Chromatic Components) - 5个一次性效果

黑键法术作为一次性的“修饰符”，施放后会附着在玩家身上，并自动作用于**下一个**施放的任何法术（无论自动或手动），然后消耗自身。这为战斗增加了丰富的即时策略性。

| 音符 (Note) | 修饰符名称 | 效果描述 | 设计思路 |
| :--- | :--- | :--- | :--- |
| **C#/Db** | **锐利变格 (Sharp Shift)** | **下一个法术：** 伤害x2，弹体速度x2，但射程/持续时间减半。 | 小二度音程的尖锐感，带来高风险高回报的爆发。 |
| **D#/Eb** | **摇摆节奏 (Swing Rhythm)** | **下一个法术：** 弹体将以S型或波浪形轨迹前进，并附带小范围的弹跳/连锁效果。 | 蓝调音符的“摇摆”感，增加攻击的覆盖面和不可预测性。 |
| **F#/Gb** | **三全分裂 (Tritone Split)** | **下一个法术：** 弹体数量x2，但每个弹体的伤害变为60%，且会朝向略微不同的方向。 | 三全音的“分裂”感，将一个法术拆分为两个。 |
| **G#/Ab** | **重音附着 (Accented Attack)** | **下一个法术：** 击中敌人后会附着一个“重音”标记，使其受到的后续伤害增加20%，持续3秒。 | 改变了属音“G”的性质，赋予其“加重”和“标记”的功能。 |
| **A#/Bb** | **加速循环 (Accelerando Loop)** | **下一个法术：** 施放后，该法术的冷却时间（在自动序列中即为下一轮的触发）立即减少50%。 | 降七音是属七和弦的核心，带来强烈的“前进”和“加速”的动力。 |

---

## 3. 和弦系统 (Chord System)

当玩家同时拥有构成和弦的**所有白键法术**时（至少三个），该和弦作为一个强大的**被动效果**或**可手动触发的主动技能**被激活。和弦的效果与其音乐特性和计算出的不和谐度紧密相关。

| 和弦名称 | 构成音 | 不和谐度 (计算值) | 效果类型 | 效果描述 |
| :--- | :--- | :--- | :--- | :--- |
| **C大三和弦** | C, E, G | 2.00 | 被动光环 | 玩家身边出现一个持续的“辉煌光环”，缓慢恢复生命值，并对进入光环的敌人造成微弱伤害。 |
| **A小三和弦** | A, C, E | 2.00 | 被动效果 | 玩家每次击败敌人时，有15%几率生成一个追踪下一个敌人的“悲伤回响”。 |
| **G属七和弦** | G, B, D, F | 4.08 | 主动技能 | **[手动触发]** 在指定位置创造一个引力场，将周围敌人吸向中心，2秒后爆炸造成巨大伤害并施加“重音附着”。 |
| **B减三和弦** | B, D, F | 4.67 | 被动触发 | 玩家生命值低于30%时，自动在身边触发一次强力的“绝境脉冲”，击退所有敌人并摧毁弹幕。有较长冷却时间。 |
| **Cmaj7 (大七)** | C, E, G, B | 3.25 | 被动效果 | 玩家的“基准音波(C)”每次发射时，都会额外携带一枚小型的“引导之声(B)”。 |
| **Dm7 (小七)** | D, F, A, C | 2.83 | 主动技能 | **[手动触发]** 向前方释放一道宽大的“穿刺光束(D)”，被击中的敌人会被“悲伤回响(A)”标记，并在死亡时触发“悬停音盾(F)”的碎片。 |

---

## 结论

本 v3.0 方案为《Project Harmony》的法术和和弦系统提供了一个兼具音乐理论深度和游戏设计趣味性的完整框架。基于量化的不和谐度模型，我们可以创造出无数种富有策略性的组合，并为后续的数值平衡、角色设计和关卡设计提供了坚实的数据基础。

## 参考文献

[1] Hindemith, P. (1942). *The Craft of Musical Composition: Book 1*. Schott Music.

[2] Plomp, R., & Levelt, W. J. M. (1965). *Tonal Consonance and Critical Bandwidth*. The Journal of the Acoustical Society of America, 38(4), 548–560.
